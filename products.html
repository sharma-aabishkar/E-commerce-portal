<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - TechMart</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <div class="navbar">
            <div class="logo">TechMart</div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html" class="active">Products</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="about.html">About Us</a></li>
            </ul>
            <div class="auth-buttons">
                <a href="login.html" class="btn-login">Login</a>
                <a href="register.html" class="btn-register">Sign Up</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Products Section -->
    <section>
        <div class="container">
            <h1 class="section-title">All Products</h1>
            
            <!-- Filter & Sort Options -->
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                    <label for="category-filter" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Filter by Category</label>
                    <select id="category-filter" style="width: 100%; padding: 0.8rem; border: 1px solid var(--border-color); border-radius: 4px;">
                        <option value="">All Categories</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Accessories">Accessories</option>
                        <option value="Peripherals">Peripherals</option>
                    </select>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <label for="sort-filter" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Sort by</label>
                    <select id="sort-filter" style="width: 100%; padding: 0.8rem; border: 1px solid var(--border-color); border-radius: 4px;">
                        <option value="default">Default</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Top Rated</option>
                    </select>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="products-grid">
                <!-- Products will be loaded by JavaScript -->
            </div>

            <!-- No Products Message -->
            <div id="no-products" class="text-center" style="display: none; padding: 3rem;">
                <p style="font-size: 1.2rem; color: #7f8c8d;">No products found matching your filters</p>
            </div>
        </div>
    </section>

    <!-- Customer Reviews Section -->
    <section style="background-color: var(--bg-light);">
        <div class="container">
            <h2 class="section-title">Customer Reviews</h2>
            
            <div style="max-width: 800px; margin: 0 auto;">
                <h3 style="margin-bottom: 2rem;">Write a Review</h3>
                <form onsubmit="return submitReview()">
                    <div class="form-group">
                        <label for="review-product-id">Select Product</label>
                        <select id="review-product-id" required>
                            <option value="">-- Choose a product --</option>
                            <option value="1">Wireless Headphones</option>
                            <option value="2">Smartwatch</option>
                            <option value="3">USB-C Cable</option>
                            <option value="4">Portable Charger</option>
                            <option value="5">Wireless Mouse</option>
                            <option value="6">Mechanical Keyboard</option>
                            <option value="7">Phone Stand</option>
                            <option value="8">Screen Protector</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="review-rating">Rating</label>
                        <select id="review-rating" required>
                            <option value="">-- Select Rating --</option>
                            <option value="5">⭐⭐⭐⭐⭐ (5 Stars)</option>
                            <option value="4">⭐⭐⭐⭐ (4 Stars)</option>
                            <option value="3">⭐⭐⭐ (3 Stars)</option>
                            <option value="2">⭐⭐ (2 Stars)</option>
                            <option value="1">⭐ (1 Star)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="review-comment">Your Review</label>
                        <textarea id="review-comment" placeholder="Write your review here (minimum 10 characters)..." required></textarea>
                        <span class="form-error"></span>
                    </div>

                    <button type="submit" class="form-submit">Submit Review</button>
                </form>
            </div>

            <!-- Reviews List -->
            <div id="reviews-list" style="margin-top: 3rem;">
                <h3 style="margin-bottom: 2rem;">Recent Reviews</h3>
                <!-- Reviews will be loaded by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>About TechMart</h4>
                <p>Your one-stop shop for all tech gadgets and accessories. Quality products at competitive prices.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Customer Service</h4>
                <ul>
                    <li><a href="#">Shipping Info</a></li>
                    <li><a href="#">Returns</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Connect With Us</h4>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">LinkedIn</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 TechMart. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Product filtering and sorting
        const categoryFilter = document.getElementById('category-filter');
        const sortFilter = document.getElementById('sort-filter');
        const productsGrid = document.querySelector('.products-grid');

        function filterAndSortProducts() {
            let filtered = sampleProducts.slice();

            // Filter by category
            if (categoryFilter.value) {
                filtered = filtered.filter(p => p.category === categoryFilter.value);
            }

            // Sort
            if (sortFilter.value === 'price-low') {
                filtered.sort((a, b) => a.price - b.price);
            } else if (sortFilter.value === 'price-high') {
                filtered.sort((a, b) => b.price - a.price);
            } else if (sortFilter.value === 'rating') {
                filtered.sort((a, b) => b.rating - a.rating);
            }

            // Display
            if (filtered.length === 0) {
                productsGrid.style.display = 'none';
                document.getElementById('no-products').style.display = 'block';
            } else {
                productsGrid.style.display = 'grid';
                document.getElementById('no-products').style.display = 'none';
                displayProducts(filtered);
            }
        }

        categoryFilter.addEventListener('change', filterAndSortProducts);
        sortFilter.addEventListener('change', filterAndSortProducts);

        // Display reviews
        function displayReviews() {
            const reviews = JSON.parse(localStorage.getItem('reviews') || '[]');
            const reviewsList = document.getElementById('reviews-list');
            
            if (reviews.length === 0) {
                reviewsList.innerHTML = '<p style="color: #7f8c8d;">No reviews yet. Be the first to review!</p>';
                return;
            }

            reviewsList.innerHTML = reviews.map(review => {
                const product = sampleProducts.find(p => p.id === review.productId);
                return `
                    <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--primary-color);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                            <strong>${product?.name || 'Unknown Product'}</strong>
                            <span style="font-size: 0.85rem; color: #7f8c8d;">${new Date(review.date).toLocaleDateString()}</span>
                        </div>
                        <div style="margin-bottom: 0.5rem;">
                            <span style="color: var(--warning-color);">${'⭐'.repeat(review.rating)}</span>
                            <span style="margin-left: 0.5rem; color: #7f8c8d;">by ${review.userName}</span>
                        </div>
                        <p style="color: var(--text-dark); line-height: 1.6;">${review.comment}</p>
                    </div>
                `;
            }).join('');
        }

        // Load reviews on page load
        window.addEventListener('load', displayReviews);
    </script>
</body>
</html>
